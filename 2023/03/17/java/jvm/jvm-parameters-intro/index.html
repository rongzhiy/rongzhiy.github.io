<!DOCTYPE html><html lang="zh-CN" data-theme="bright"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>æœ€é‡è¦çš„ JVM å‚æ•°æ€»ç»“ | Rongzhiyã®blog</title><meta name="keywords" content="JVM"><meta name="author" content="é˜¿æ³½"><meta name="copyright" content="é˜¿æ³½"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="same-origin">
<meta name="referrer" content="no-referrer" /><meta name="description" content="æœ¬æ–‡ç”± JavaGuide ç¿»è¯‘è‡ª https:&#x2F;&#x2F;www.baeldung.com&#x2F;jvm-parametersï¼Œå¹¶å¯¹æ–‡ç« è¿›è¡Œäº†å¤§é‡çš„å®Œå–„è¡¥å……ã€‚ JDK ç‰ˆæœ¬ï¼š1.8  1.æ¦‚è¿°åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†æŒæ¡æœ€å¸¸ç”¨çš„ JVM å‚æ•°é…ç½®ã€‚ 2.å †å†…å­˜ç›¸å…³ Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼ŒJava å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰">
<meta property="og:type" content="article">
<meta property="og:title" content="æœ€é‡è¦çš„ JVM å‚æ•°æ€»ç»“">
<meta property="og:url" content="https://rongzhiy.github.io/2023/03/17/java/jvm/jvm-parameters-intro/index.html">
<meta property="og:site_name" content="Rongzhiyã®blog">
<meta property="og:description" content="æœ¬æ–‡ç”± JavaGuide ç¿»è¯‘è‡ª https:&#x2F;&#x2F;www.baeldung.com&#x2F;jvm-parametersï¼Œå¹¶å¯¹æ–‡ç« è¿›è¡Œäº†å¤§é‡çš„å®Œå–„è¡¥å……ã€‚ JDK ç‰ˆæœ¬ï¼š1.8  1.æ¦‚è¿°åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†æŒæ¡æœ€å¸¸ç”¨çš„ JVM å‚æ•°é…ç½®ã€‚ 2.å †å†…å­˜ç›¸å…³ Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼ŒJava å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/08/27/yEud3FG7Ds5ORcw.jpg">
<meta property="article:published_time" content="2023-03-17T08:59:52.922Z">
<meta property="article:modified_time" content="2023-03-16T07:55:48.000Z">
<meta property="article:author" content="é˜¿æ³½">
<meta property="article:tag" content="JVM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/08/27/yEud3FG7Ds5ORcw.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://rongzhiy.github.io/2023/03/17/java/jvm/jvm-parameters-intro/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-16 15:55:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/cat.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">92</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">14</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Rongzhiyã®blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">æœ€é‡è¦çš„ JVM å‚æ•°æ€»ç»“</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-03-17T08:59:52.922Z" title="å‘è¡¨äº 2023-03-17 16:59:52">2023-03-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-03-16T07:55:48.000Z" title="æ›´æ–°äº 2023-03-16 15:55:48">2023-03-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">2.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>8åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="æœ€é‡è¦çš„ JVM å‚æ•°æ€»ç»“"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><blockquote>
<p>æœ¬æ–‡ç”± JavaGuide ç¿»è¯‘è‡ª <a target="_blank" rel="noopener" href="https://www.baeldung.com/jvm-parameters">https://www.baeldung.com/jvm-parameters</a>ï¼Œå¹¶å¯¹æ–‡ç« è¿›è¡Œäº†å¤§é‡çš„å®Œå–„è¡¥å……ã€‚</p>
<p>JDK ç‰ˆæœ¬ï¼š1.8</p>
</blockquote>
<h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h2><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†æŒæ¡æœ€å¸¸ç”¨çš„ JVM å‚æ•°é…ç½®ã€‚</p>
<h2 id="2-å †å†…å­˜ç›¸å…³"><a href="#2-å †å†…å­˜ç›¸å…³" class="headerlink" title="2.å †å†…å­˜ç›¸å…³"></a>2.å †å†…å­˜ç›¸å…³</h2><blockquote>
<p>Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼ŒJava å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚<strong>æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</strong></p>
</blockquote>
<p><img src="/2023/03/17/java/jvm/jvm-parameters-intro/%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0.png" alt="å†…å­˜åŒºåŸŸå¸¸è§é…ç½®å‚æ•°"></p>
<h3 id="2-1-æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“Xmså’Œ-Xmx"><a href="#2-1-æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“Xmså’Œ-Xmx" class="headerlink" title="2.1.æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“Xmså’Œ-Xmx"></a>2.1.æ˜¾å¼æŒ‡å®šå †å†…å­˜<code>â€“Xms</code>å’Œ<code>-Xmx</code></h3><p>ä¸æ€§èƒ½æœ‰å…³çš„æœ€å¸¸è§å®è·µä¹‹ä¸€æ˜¯æ ¹æ®åº”ç”¨ç¨‹åºè¦æ±‚åˆå§‹åŒ–å †å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æŒ‡å®šæœ€å°å’Œæœ€å¤§å †å¤§å°ï¼ˆæ¨èæ˜¾ç¤ºæŒ‡å®šå¤§å°ï¼‰ï¼Œä»¥ä¸‹å‚æ•°å¯ä»¥å¸®åŠ©ä½ å®ç°ï¼š</p>
<pre><code class="bash">-Xms&lt;heap size&gt;[unit]
-Xmx&lt;heap size&gt;[unit]
</code></pre>
<ul>
<li><strong>heap size</strong> è¡¨ç¤ºè¦åˆå§‹åŒ–å†…å­˜çš„å…·ä½“å¤§å°ã€‚</li>
<li><strong>unit</strong> è¡¨ç¤ºè¦åˆå§‹åŒ–å†…å­˜çš„å•ä½ã€‚å•ä½ä¸º**<em>â€œ gâ€</em>** (GB) ã€**<em>â€œ mâ€</em><strong>ï¼ˆMBï¼‰ã€</strong><em>â€œ kâ€</em>**ï¼ˆKBï¼‰ã€‚</li>
</ul>
<p>ä¸¾ä¸ªæ —å­ ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸º JVM åˆ†é…æœ€å° 2 GB å’Œæœ€å¤§ 5 GB çš„å †å†…å­˜å¤§å°ï¼Œæˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p>
<pre><code class="bash">-Xms2G -Xmx5G
</code></pre>
<h3 id="2-2-æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜-Young-Generation"><a href="#2-2-æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜-Young-Generation" class="headerlink" title="2.2.æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜(Young Generation)"></a>2.2.æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜(Young Generation)</h3><p>æ ¹æ®<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html">Oracle å®˜æ–¹æ–‡æ¡£</a>ï¼Œåœ¨å †æ€»å¯ç”¨å†…å­˜é…ç½®å®Œæˆä¹‹åï¼Œç¬¬äºŒå¤§å½±å“å› ç´ æ˜¯ä¸º <code>Young Generation</code> åœ¨å †å†…å­˜æ‰€å çš„æ¯”ä¾‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒYG çš„æœ€å°å¤§å°ä¸º 1310 _MB_ï¼Œæœ€å¤§å¤§å°ä¸º<em>æ— é™åˆ¶</em>ã€‚</p>
<p>ä¸€å…±æœ‰ä¸¤ç§æŒ‡å®š æ–°ç”Ÿä»£å†…å­˜(Young Ceneration)å¤§å°çš„æ–¹æ³•ï¼š</p>
<p><strong>1.é€šè¿‡<code>-XX:NewSize</code>å’Œ<code>-XX:MaxNewSize</code>æŒ‡å®š</strong></p>
<pre><code class="bash">-XX:NewSize=&lt;young size&gt;[unit]
-XX:MaxNewSize=&lt;young size&gt;[unit]
</code></pre>
<p>ä¸¾ä¸ªæ —å­ ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸º æ–°ç”Ÿä»£åˆ†é… æœ€å° 256m çš„å†…å­˜ï¼Œæœ€å¤§ 1024m çš„å†…å­˜æˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p>
<pre><code class="bash">-XX:NewSize=256m
-XX:MaxNewSize=1024m
</code></pre>
<p><strong>2.é€šè¿‡<code>-Xmn&lt;young size&gt;[unit]</code>æŒ‡å®š</strong></p>
<p>ä¸¾ä¸ªæ —å­ ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸º æ–°ç”Ÿä»£åˆ†é… 256m çš„å†…å­˜ï¼ˆNewSize ä¸ MaxNewSize è®¾ä¸ºä¸€è‡´ï¼‰ï¼Œæˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p>
<pre><code class="bash">-Xmn256m
</code></pre>
<p>GC è°ƒä¼˜ç­–ç•¥ä¸­å¾ˆé‡è¦çš„ä¸€æ¡ç»éªŒæ€»ç»“æ˜¯è¿™æ ·è¯´çš„ï¼š</p>
<blockquote>
<p>å°†æ–°å¯¹è±¡é¢„ç•™åœ¨æ–°ç”Ÿä»£ï¼Œç”±äº Full GC çš„æˆæœ¬è¿œé«˜äº Minor GCï¼Œå› æ­¤å°½å¯èƒ½å°†å¯¹è±¡åˆ†é…åœ¨æ–°ç”Ÿä»£æ˜¯æ˜æ™ºçš„åšæ³•ï¼Œå®é™…é¡¹ç›®ä¸­æ ¹æ® GC æ—¥å¿—åˆ†ææ–°ç”Ÿä»£ç©ºé—´å¤§å°åˆ†é…æ˜¯å¦åˆç†ï¼Œé€‚å½“é€šè¿‡â€œ-Xmnâ€å‘½ä»¤è°ƒèŠ‚æ–°ç”Ÿä»£å¤§å°ï¼Œæœ€å¤§é™åº¦é™ä½æ–°å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£çš„æƒ…å†µã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ <strong><code>-XX:NewRatio=&lt;int&gt;</code></strong> æ¥è®¾ç½®è€å¹´ä»£ä¸æ–°ç”Ÿä»£å†…å­˜çš„æ¯”å€¼ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„å‚æ•°å°±æ˜¯è®¾ç½®è€å¹´ä»£ä¸æ–°ç”Ÿä»£å†…å­˜çš„æ¯”å€¼ä¸º 1ã€‚ä¹Ÿå°±æ˜¯è¯´è€å¹´ä»£å’Œæ–°ç”Ÿä»£æ‰€å æ¯”å€¼ä¸º 1ï¼š1ï¼Œæ–°ç”Ÿä»£å æ•´ä¸ªå †æ ˆçš„ 1&#x2F;2ã€‚</p>
<pre><code>-XX:NewRatio=1
</code></pre>
<h3 id="2-3-æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£-x2F-å…ƒç©ºé—´çš„å¤§å°"><a href="#2-3-æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£-x2F-å…ƒç©ºé—´çš„å¤§å°" class="headerlink" title="2.3.æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£&#x2F;å…ƒç©ºé—´çš„å¤§å°"></a>2.3.æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£&#x2F;å…ƒç©ºé—´çš„å¤§å°</h3><p><strong>ä» Java 8 å¼€å§‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®š Metaspace çš„å¤§å°ï¼Œéšç€æ›´å¤šç±»çš„åˆ›å»ºï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰å¯ç”¨çš„ç³»ç»Ÿå†…å­˜ï¼ˆæ°¸ä¹…ä»£å¹¶ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼‰ã€‚</strong></p>
<p>JDK 1.8 ä¹‹å‰æ°¸ä¹…ä»£è¿˜æ²¡è¢«å½»åº•ç§»é™¤çš„æ—¶å€™é€šå¸¸é€šè¿‡ä¸‹é¢è¿™äº›å‚æ•°æ¥è°ƒèŠ‚æ–¹æ³•åŒºå¤§å°</p>
<pre><code class="bash">-XX:PermSize=N #æ–¹æ³•åŒº (æ°¸ä¹…ä»£) åˆå§‹å¤§å°
-XX:MaxPermSize=N #æ–¹æ³•åŒº (æ°¸ä¹…ä»£) æœ€å¤§å¤§å°,è¶…è¿‡è¿™ä¸ªå€¼å°†ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸:java.lang.OutOfMemoryError: PermGen
</code></pre>
<p>ç›¸å¯¹è€Œè¨€ï¼Œåƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨è¿™ä¸ªåŒºåŸŸæ˜¯æ¯”è¾ƒå°‘å‡ºç°çš„ï¼Œä½†å¹¶éæ•°æ®è¿›å…¥æ–¹æ³•åŒºåå°±â€œæ°¸ä¹…å­˜åœ¨â€äº†ã€‚</p>
<p><strong>JDK 1.8 çš„æ—¶å€™ï¼Œæ–¹æ³•åŒºï¼ˆHotSpot çš„æ°¸ä¹…ä»£ï¼‰è¢«å½»åº•ç§»é™¤äº†ï¼ˆJDK1.7 å°±å·²ç»å¼€å§‹äº†ï¼‰ï¼Œå–è€Œä»£ä¹‹æ˜¯å…ƒç©ºé—´ï¼Œå…ƒç©ºé—´ä½¿ç”¨çš„æ˜¯æœ¬åœ°å†…å­˜ã€‚</strong></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨å‚æ•°ï¼š</p>
<pre><code class="bash">-XX:MetaspaceSize=N #è®¾ç½® Metaspace çš„åˆå§‹å¤§å°ï¼ˆæ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºï¼Œåé¢ä¼šè§£é‡Šï¼‰
-XX:MaxMetaspaceSize=N #è®¾ç½® Metaspace çš„æœ€å¤§å¤§å°
</code></pre>
<p><strong>ğŸ› ä¿®æ­£ï¼ˆå‚è§ï¼š <a target="_blank" rel="noopener" href="https://github.com/Snailclimb/JavaGuide/issues/1947">issue#1947</a>ï¼‰</strong>ï¼š</p>
<p>1ã€Metaspace çš„åˆå§‹å®¹é‡å¹¶ä¸æ˜¯ <code>-XX:MetaspaceSize</code> è®¾ç½®ï¼Œæ— è®º <code>-XX:MetaspaceSize</code> é…ç½®ä»€ä¹ˆå€¼ï¼Œå¯¹äº 64 ä½ JVM æ¥è¯´ï¼ŒMetaspace çš„åˆå§‹å®¹é‡éƒ½æ˜¯ 21807104ï¼ˆçº¦ 20.8mï¼‰ã€‚</p>
<p>å¯ä»¥å‚è€ƒ Oracle å®˜æ–¹æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/considerations.html">Other Considerations</a> ä¸­æåˆ°çš„ï¼š</p>
<blockquote>
<p>Specify a higher value for the option MetaspaceSize to avoid early garbage collections induced for class metadata. The amount of class metadata allocated for an application is application-dependent and general guidelines do not exist for the selection of MetaspaceSize. The default size of MetaspaceSize is platform-dependent and ranges from 12 MB to about 20 MB.</p>
<p>MetaspaceSize çš„é»˜è®¤å¤§å°å–å†³äºå¹³å°ï¼ŒèŒƒå›´ä» 12 MB åˆ°å¤§çº¦ 20 MBã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªè¯•éªŒï¼š<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/jqfppqqd98DfAJHZhFbmxA">JVM å‚æ•° MetaspaceSize çš„è¯¯è§£</a>ã€‚</p>
<p>2ã€Metaspace ç”±äºä½¿ç”¨ä¸æ–­æ‰©å®¹åˆ°<code>-XX:MetaspaceSize</code>å‚æ•°æŒ‡å®šçš„é‡ï¼Œå°±ä¼šå‘ç”Ÿ FGCï¼Œä¸”ä¹‹åæ¯æ¬¡ Metaspace æ‰©å®¹éƒ½ä¼šå‘ç”Ÿ Full GCã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒMetaspaceSize è¡¨ç¤º Metaspace ä½¿ç”¨è¿‡ç¨‹ä¸­è§¦å‘ Full GC çš„é˜ˆå€¼ï¼Œåªå¯¹è§¦å‘èµ·ä½œç”¨ã€‚</p>
<p>åƒåœ¾æœé›†å™¨å†…éƒ¨æ˜¯æ ¹æ®å˜é‡ <code>_capacity_until_GC</code>æ¥åˆ¤æ–­ Metaspace åŒºåŸŸæ˜¯å¦è¾¾åˆ°é˜ˆå€¼çš„ï¼Œåˆå§‹åŒ–ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="c">void MetaspaceGC::initialize() &#123;
  // Set the high-water mark to MaxMetapaceSize during VM initializaton since
  // we can&#39;t do a GC during initialization.
  _capacity_until_GC = MaxMetaspaceSize;
&#125;
</code></pre>
<p>ç›¸å…³é˜…è¯»ï¼š <a target="_blank" rel="noopener" href="https://github.com/Snailclimb/JavaGuide/issues/1204">issue æ›´æ­£ï¼šMaxMetaspaceSizeå¦‚æœä¸æŒ‡å®šå¤§å°çš„è¯ï¼Œä¸ä¼šè€—å°½å†…å­˜ #1204 </a> ã€‚</p>
<h2 id="3-åƒåœ¾æ”¶é›†ç›¸å…³"><a href="#3-åƒåœ¾æ”¶é›†ç›¸å…³" class="headerlink" title="3.åƒåœ¾æ”¶é›†ç›¸å…³"></a>3.åƒåœ¾æ”¶é›†ç›¸å…³</h2><h3 id="3-1-åƒåœ¾å›æ”¶å™¨"><a href="#3-1-åƒåœ¾å›æ”¶å™¨" class="headerlink" title="3.1.åƒåœ¾å›æ”¶å™¨"></a>3.1.åƒåœ¾å›æ”¶å™¨</h3><p>ä¸ºäº†æé«˜åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ï¼Œé€‰æ‹©æ­£ç¡®çš„<a target="_blank" rel="noopener" href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html">åƒåœ¾æ”¶é›†</a>ç®—æ³•è‡³å…³é‡è¦ã€‚</p>
<p>JVM å…·æœ‰å››ç§ç±»å‹çš„ GC å®ç°ï¼š</p>
<ul>
<li>ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨</li>
<li>å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨</li>
<li>CMS åƒåœ¾æ”¶é›†å™¨</li>
<li>G1 åƒåœ¾æ”¶é›†å™¨</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‚æ•°å£°æ˜è¿™äº›å®ç°ï¼š</p>
<pre><code class="bash">-XX:+UseSerialGC
-XX:+UseParallelGC
-XX:+UseParNewGC
-XX:+UseG1GC
</code></pre>
<p>æœ‰å…³<em>åƒåœ¾å›æ”¶</em>å®æ–½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a target="_blank" rel="noopener" href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/jvm/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.md">æ­¤å¤„</a>ã€‚</p>
<h3 id="3-2-GC-æ—¥å¿—è®°å½•"><a href="#3-2-GC-æ—¥å¿—è®°å½•" class="headerlink" title="3.2.GC æ—¥å¿—è®°å½•"></a>3.2.GC æ—¥å¿—è®°å½•</h3><p>ç”Ÿäº§ç¯å¢ƒä¸Šï¼Œæˆ–è€…å…¶ä»–è¦æµ‹è¯• GC é—®é¢˜çš„ç¯å¢ƒä¸Šï¼Œä¸€å®šä¼šé…ç½®ä¸Šæ‰“å° GC æ—¥å¿—çš„å‚æ•°ï¼Œä¾¿äºåˆ†æ GC ç›¸å…³çš„é—®é¢˜ã€‚</p>
<pre><code class="bash"># å¿…é€‰
# æ‰“å°åŸºæœ¬ GC ä¿¡æ¯
-XX:+PrintGCDetails
-XX:+PrintGCDateStamps
# æ‰“å°å¯¹è±¡åˆ†å¸ƒ
-XX:+PrintTenuringDistribution
# æ‰“å°å †æ•°æ®
-XX:+PrintHeapAtGC
# æ‰“å°Referenceå¤„ç†ä¿¡æ¯
# å¼ºå¼•ç”¨/å¼±å¼•ç”¨/è½¯å¼•ç”¨/è™šå¼•ç”¨/finalize ç›¸å…³çš„æ–¹æ³•
-XX:+PrintReferenceGC
# æ‰“å°STWæ—¶é—´
-XX:+PrintGCApplicationStoppedTime

# å¯é€‰
# æ‰“å°safepointä¿¡æ¯ï¼Œè¿›å…¥ STW é˜¶æ®µä¹‹å‰ï¼Œéœ€è¦è¦æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ safepoint
-XX:+PrintSafepointStatistics
-XX:PrintSafepointStatisticsCount=1

# GCæ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„
-Xloggc:/path/to/gc-%t.log
# å¼€å¯æ—¥å¿—æ–‡ä»¶åˆ†å‰²
-XX:+UseGCLogFileRotation
# æœ€å¤šåˆ†å‰²å‡ ä¸ªæ–‡ä»¶ï¼Œè¶…è¿‡ä¹‹åä»å¤´æ–‡ä»¶å¼€å§‹å†™
-XX:NumberOfGCLogFiles=14
# æ¯ä¸ªæ–‡ä»¶ä¸Šé™å¤§å°ï¼Œè¶…è¿‡å°±è§¦å‘åˆ†å‰²
-XX:GCLogFileSize=50M
</code></pre>
<h2 id="4-å¤„ç†-OOM"><a href="#4-å¤„ç†-OOM" class="headerlink" title="4.å¤„ç† OOM"></a>4.å¤„ç† OOM</h2><p>å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œé¢å¯¹å†…å­˜ä¸è¶³é”™è¯¯æ˜¯éå¸¸å¸¸è§çš„ï¼Œè¿™åè¿‡æ¥ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºå´©æºƒã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„åœºæ™¯ï¼Œå¾ˆéš¾é€šè¿‡å¤åˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ JVM æä¾›äº†ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°å°†å †å†…å­˜è½¬å‚¨åˆ°ä¸€ä¸ªç‰©ç†æ–‡ä»¶ä¸­ï¼Œä»¥åå¯ä»¥ç”¨æ¥æŸ¥æ‰¾æ³„æ¼:</p>
<pre><code class="bash">-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=./java_pid&lt;pid&gt;.hprof
-XX:OnOutOfMemoryError=&quot;&lt; cmd args &gt;;&lt; cmd args &gt;&quot;
-XX:+UseGCOverheadLimit
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„:</p>
<ul>
<li><strong>HeapDumpOnOutOfMemoryError</strong> æŒ‡ç¤º JVM åœ¨é‡åˆ° <strong>OutOfMemoryError</strong> é”™è¯¯æ—¶å°† heap è½¬å‚¨åˆ°ç‰©ç†æ–‡ä»¶ä¸­ã€‚</li>
<li><strong>HeapDumpPath</strong> è¡¨ç¤ºè¦å†™å…¥æ–‡ä»¶çš„è·¯å¾„; å¯ä»¥ç»™å‡ºä»»ä½•æ–‡ä»¶å; ä½†æ˜¯ï¼Œå¦‚æœ JVM åœ¨åç§°ä¸­æ‰¾åˆ°ä¸€ä¸ª <code>&lt;pid&gt;</code> æ ‡è®°ï¼Œåˆ™å½“å‰è¿›ç¨‹çš„è¿›ç¨‹ id å°†é™„åŠ åˆ°æ–‡ä»¶åä¸­ï¼Œå¹¶ä½¿ç”¨<code>.hprof</code>æ ¼å¼</li>
<li><strong>OnOutOfMemoryError</strong> ç”¨äºå‘å‡ºç´§æ€¥å‘½ä»¤ï¼Œä»¥ä¾¿åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹æ‰§è¡Œ; åº”è¯¥åœ¨ <code>cmd args</code> ç©ºé—´ä¸­ä½¿ç”¨é€‚å½“çš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨å†…å­˜ä¸è¶³æ—¶é‡å¯æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å‚æ•°: <code>-XX:OnOutOfMemoryError=&quot;shutdown -r&quot;</code> ã€‚</li>
<li><strong>UseGCOverheadLimit</strong> æ˜¯ä¸€ç§ç­–ç•¥ï¼Œå®ƒé™åˆ¶åœ¨æŠ›å‡º OutOfMemory é”™è¯¯ä¹‹å‰åœ¨ GC ä¸­èŠ±è´¹çš„ VM æ—¶é—´çš„æ¯”ä¾‹</li>
</ul>
<h2 id="5-å…¶ä»–"><a href="#5-å…¶ä»–" class="headerlink" title="5.å…¶ä»–"></a>5.å…¶ä»–</h2><ul>
<li><code>-server</code> : å¯ç”¨â€œ Server Hotspot VMâ€; æ­¤å‚æ•°é»˜è®¤ç”¨äº 64 ä½ JVM</li>
<li><code>-XX:+UseStringDeduplication</code> : <em>Java 8u20</em> å¼•å…¥äº†è¿™ä¸ª JVM å‚æ•°ï¼Œé€šè¿‡åˆ›å»ºå¤ªå¤šç›¸åŒ String çš„å®ä¾‹æ¥å‡å°‘ä¸å¿…è¦çš„å†…å­˜ä½¿ç”¨; è¿™é€šè¿‡å°†é‡å¤ String å€¼å‡å°‘ä¸ºå•ä¸ªå…¨å±€ <code>char []</code> æ•°ç»„æ¥ä¼˜åŒ–å †å†…å­˜ã€‚</li>
<li><code>-XX:+UseLWPSynchronization</code>: è®¾ç½®åŸºäº LWP (è½»é‡çº§è¿›ç¨‹)çš„åŒæ­¥ç­–ç•¥ï¼Œè€Œä¸æ˜¯åŸºäºçº¿ç¨‹çš„åŒæ­¥ã€‚</li>
<li>&#96;&#96;-XX:LargePageSizeInBytes &#96;: è®¾ç½®ç”¨äº Java å †çš„è¾ƒå¤§é¡µé¢å¤§å°; å®ƒé‡‡ç”¨ GB&#x2F;MB&#x2F;KB çš„å‚æ•°; é¡µé¢å¤§å°è¶Šå¤§ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨è™šæ‹Ÿå†…å­˜ç¡¬ä»¶èµ„æº; ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ PermGen çš„ç©ºé—´å¤§å°æ›´å¤§ï¼Œè¿™åè¿‡æ¥åˆä¼šè¿«ä½¿ Java å †ç©ºé—´çš„å¤§å°å‡å°ã€‚</li>
<li><code>-XX:MaxHeapFreeRatio</code> : è®¾ç½® GC å, å †ç©ºé—²çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œä»¥é¿å…æ”¶ç¼©ã€‚</li>
<li><code>-XX:SurvivorRatio</code> : eden&#x2F;survivor ç©ºé—´çš„æ¯”ä¾‹, ä¾‹å¦‚<code>-XX:SurvivorRatio=6</code> è®¾ç½®æ¯ä¸ª survivor å’Œ eden ä¹‹é—´çš„æ¯”ä¾‹ä¸º 1:6ã€‚</li>
<li><code>-XX:+UseLargePages</code> : å¦‚æœç³»ç»Ÿæ”¯æŒï¼Œåˆ™ä½¿ç”¨å¤§é¡µé¢å†…å­˜; è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ª JVM å‚æ•°ï¼ŒOpenJDK 7 å¯èƒ½ä¼šå´©æºƒã€‚</li>
<li><code>-XX:+UseStringCache</code> : å¯ç”¨ String æ± ä¸­å¯ç”¨çš„å¸¸ç”¨åˆ†é…å­—ç¬¦ä¸²çš„ç¼“å­˜ã€‚</li>
<li><code>-XX:+UseCompressedStrings</code> : å¯¹ String å¯¹è±¡ä½¿ç”¨ <code>byte []</code> ç±»å‹ï¼Œè¯¥ç±»å‹å¯ä»¥ç”¨çº¯ ASCII æ ¼å¼è¡¨ç¤ºã€‚</li>
<li><code>-XX:+OptimizeStringConcat</code> : å®ƒå°½å¯èƒ½ä¼˜åŒ–å­—ç¬¦ä¸²ä¸²è”æ“ä½œã€‚</li>
</ul>
<h2 id="æ–‡ç« æ¨è"><a href="#æ–‡ç« æ¨è" class="headerlink" title="æ–‡ç« æ¨è"></a>æ–‡ç« æ¨è</h2><p>è¿™é‡Œæ¨èäº†éå¸¸å¤šä¼˜è´¨çš„ JVM å®è·µç›¸å…³çš„æ–‡ç« ï¼Œæ¨èé˜…è¯»ï¼Œå°¤å…¶æ˜¯ JVM æ€§èƒ½ä¼˜åŒ–å’Œé—®é¢˜æ’æŸ¥ç›¸å…³çš„æ–‡ç« ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/148851.html">JVM å‚æ•°é…ç½®è¯´æ˜ - é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£ - 2022</a></li>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/383255.html">JVM å†…å­˜é…ç½®æœ€ä½³å®è·µ - é˜¿é‡Œäº‘å®˜æ–¹æ–‡æ¡£ - 2022</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000039806436">æ±‚ä½ äº†ï¼ŒGC æ—¥å¿—æ‰“å°åˆ«å†çé…ç½®äº† - æ€å¦ - 2022</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7078624931826794503">ä¸€æ¬¡å¤§é‡ JVM Native å†…å­˜æ³„éœ²çš„æ’æŸ¥åˆ†æï¼ˆ64M é—®é¢˜ï¼‰ - æ˜é‡‘ - 2022</a></li>
<li><a target="_blank" rel="noopener" href="https://heapdump.cn/article/1859160">ä¸€æ¬¡çº¿ä¸Š JVM è°ƒä¼˜å®è·µï¼ŒFullGC40 æ¬¡&#x2F;å¤©åˆ° 10 å¤©ä¸€æ¬¡çš„ä¼˜åŒ–è¿‡ç¨‹ - HeadpDump - 2021</a></li>
<li><a target="_blank" rel="noopener" href="https://shuyi.tech/archives/have-a-try-in-jvm-combat">å¬è¯´ JVM æ€§èƒ½ä¼˜åŒ–å¾ˆéš¾ï¼Ÿä»Šå¤©æˆ‘å°è¯•äº†ä¸€æŠŠï¼ - é™ˆæ ‘ä¹‰ - 2021</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/df1uxHWUXzhErxW1sZ6OvQ">ä½ ä»¬è¦çš„çº¿ä¸Š GC é—®é¢˜æ¡ˆä¾‹æ¥å•¦ - ç¼–äº†ä¸ªç¨‹ - 2021</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2020/11/12/java-9-cms-gc.html">Java ä¸­ 9 ç§å¸¸è§çš„ CMS GC é—®é¢˜åˆ†æä¸è§£å†³ - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ - 2020</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2017/12/29/jvm-optimize.html">ä»å®é™…æ¡ˆä¾‹èŠèŠ Java åº”ç”¨çš„ GC ä¼˜åŒ–-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ - 2017</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">é˜¿æ³½</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://rongzhiy.github.io/2023/03/17/java/jvm/jvm-parameters-intro/">https://rongzhiy.github.io/2023/03/17/java/jvm/jvm-parameters-intro/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://rongzhiy.github.io" target="_blank">Rongzhiyã®blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JVM/">JVM</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2023/08/27/yEud3FG7Ds5ORcw.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/17/java/jvm/memory-area/"><img class="prev-cover" src="https://s2.loli.net/2023/08/27/S3Dh8MAcr2yqGW4.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Java å†…å­˜åŒºåŸŸè¯¦è§£ï¼ˆé‡ç‚¹ï¼‰</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/17/java/jvm/jvm-intro/"><img class="next-cover" src="https://s2.loli.net/2023/08/27/3YvT1HQPxIRrKAF.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å¤§ç™½è¯å¸¦ä½ è®¤è¯† JVM</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/03/17/java/jvm/memory-area/" title="Java å†…å­˜åŒºåŸŸè¯¦è§£ï¼ˆé‡ç‚¹ï¼‰"><img class="cover" src="https://s2.loli.net/2023/08/27/S3Dh8MAcr2yqGW4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title">Java å†…å­˜åŒºåŸŸè¯¦è§£ï¼ˆé‡ç‚¹ï¼‰</div></div></a></div><div><a href="/2023/03/17/java/jvm/jvm-intro/" title="å¤§ç™½è¯å¸¦ä½ è®¤è¯† JVM"><img class="cover" src="https://s2.loli.net/2023/08/27/3YvT1HQPxIRrKAF.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title">å¤§ç™½è¯å¸¦ä½ è®¤è¯† JVM</div></div></a></div><div><a href="/2023/03/17/java/jvm/jvm-garbage-collection/" title="JVM åƒåœ¾å›æ”¶è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰"><img class="cover" src="https://s2.loli.net/2023/08/27/FvqDyxHKbiWo1d3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title">JVM åƒåœ¾å›æ”¶è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰</div></div></a></div><div><a href="/2023/03/17/java/jvm/jdk-monitoring-and-troubleshooting-tools/" title=""><img class="cover" src="https://s2.loli.net/2023/08/27/Ck6NOjqPaXSv8Di.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title"></div></div></a></div><div><a href="/2023/03/17/java/jvm/classloader/" title="ç±»åŠ è½½å™¨è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰"><img class="cover" src="https://s2.loli.net/2023/08/27/KFXsIP75dlBOeVN.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title">ç±»åŠ è½½å™¨è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰</div></div></a></div><div><a href="/2023/03/17/java/jvm/class-loading-process/" title="ç±»åŠ è½½è¿‡ç¨‹è¯¦è§£"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-17</div><div class="title">ç±»åŠ è½½è¿‡ç¨‹è¯¦è§£</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">é˜¿æ³½</div><div class="author-info__description">Stay Hungry,Stay Foolish</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">92</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">14</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/rongzhiy"><i class="fab fa-github"></i><span>github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:rongzhiy2735@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2735545128&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/327319339" target="_blank" title="BILiBili"><i class="fab fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿å…³æ³¨ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%A0%86%E5%86%85%E5%AD%98%E7%9B%B8%E5%85%B3"><span class="toc-number">2.</span> <span class="toc-text">2.å †å†…å­˜ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E5%A0%86%E5%86%85%E5%AD%98%E2%80%93Xms%E5%92%8C-Xmx"><span class="toc-number">2.1.</span> <span class="toc-text">2.1.æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“Xmså’Œ-Xmx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%98%BE%E5%BC%8F%E6%96%B0%E7%94%9F%E4%BB%A3%E5%86%85%E5%AD%98-Young-Generation"><span class="toc-number">2.2.</span> <span class="toc-text">2.2.æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜(Young Generation)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E6%B0%B8%E4%B9%85%E4%BB%A3-x2F-%E5%85%83%E7%A9%BA%E9%97%B4%E7%9A%84%E5%A4%A7%E5%B0%8F"><span class="toc-number">2.3.</span> <span class="toc-text">2.3.æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£&#x2F;å…ƒç©ºé—´çš„å¤§å°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%9B%B8%E5%85%B3"><span class="toc-number">3.</span> <span class="toc-text">3.åƒåœ¾æ”¶é›†ç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">3.1.åƒåœ¾å›æ”¶å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-GC-%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95"><span class="toc-number">3.2.</span> <span class="toc-text">3.2.GC æ—¥å¿—è®°å½•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%A4%84%E7%90%86-OOM"><span class="toc-number">4.</span> <span class="toc-text">4.å¤„ç† OOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%85%B6%E4%BB%96"><span class="toc-number">5.</span> <span class="toc-text">5.å…¶ä»–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%8E%A8%E8%8D%90"><span class="toc-number">6.</span> <span class="toc-text">æ–‡ç« æ¨è</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/27/open-source-project/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/" title="æè·³è·³ å®‰å“è·³è¿‡å¹¿å‘Š"><img src="https://s2.loli.net/2023/08/27/zmT91yfbUiKZwRv.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æè·³è·³ å®‰å“è·³è¿‡å¹¿å‘Š"/></a><div class="content"><a class="title" href="/2023/08/27/open-source-project/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/" title="æè·³è·³ å®‰å“è·³è¿‡å¹¿å‘Š">æè·³è·³ å®‰å“è·³è¿‡å¹¿å‘Š</a><time datetime="2023-08-27T11:07:56.206Z" title="å‘è¡¨äº 2023-08-27 19:07:56">2023-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/26/ChatGPT/ChatGPTGuide/" title="ChatGPTä½¿ç”¨æŒ‡å—"><img src="https://s2.loli.net/2023/08/27/rwZz5XfJLkhUB3E.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ChatGPTä½¿ç”¨æŒ‡å—"/></a><div class="content"><a class="title" href="/2023/04/26/ChatGPT/ChatGPTGuide/" title="ChatGPTä½¿ç”¨æŒ‡å—">ChatGPTä½¿ç”¨æŒ‡å—</a><time datetime="2023-04-26T12:00:00.000Z" title="å‘è¡¨äº 2023-04-26 20:00:00">2023-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/01/practice/%E5%9F%BA%E4%BA%8ESpringBoot%E7%9A%84%E6%A0%A1%E5%9B%AD%E9%97%AE%E7%AD%94%E7%A4%BE%E5%8C%BA%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%EF%BC%89/" title="åŸºäºSpringBootçš„æ ¡å›­é—®ç­”ç¤¾åŒºç³»ç»Ÿè®¾è®¡ä¸å®ç°ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰"><img src="https://s2.loli.net/2023/08/27/yEud3FG7Ds5ORcw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åŸºäºSpringBootçš„æ ¡å›­é—®ç­”ç¤¾åŒºç³»ç»Ÿè®¾è®¡ä¸å®ç°ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰"/></a><div class="content"><a class="title" href="/2023/04/01/practice/%E5%9F%BA%E4%BA%8ESpringBoot%E7%9A%84%E6%A0%A1%E5%9B%AD%E9%97%AE%E7%AD%94%E7%A4%BE%E5%8C%BA%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%EF%BC%89/" title="åŸºäºSpringBootçš„æ ¡å›­é—®ç­”ç¤¾åŒºç³»ç»Ÿè®¾è®¡ä¸å®ç°ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰">åŸºäºSpringBootçš„æ ¡å›­é—®ç­”ç¤¾åŒºç³»ç»Ÿè®¾è®¡ä¸å®ç°ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰</a><time datetime="2023-04-01T12:00:00.000Z" title="å‘è¡¨äº 2023-04-01 20:00:00">2023-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/01/practice/%E4%BA%91%E5%A4%A7%E5%8D%83%E5%AF%BB/" title="äº‘å¤§åƒå¯» - åŸºäºæ‹ç…§è¯†åˆ«çš„å¤±ç‰©æ‰¾å¯»ç³»ç»Ÿ"><img src="https://s2.loli.net/2023/08/27/rwZz5XfJLkhUB3E.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="äº‘å¤§åƒå¯» - åŸºäºæ‹ç…§è¯†åˆ«çš„å¤±ç‰©æ‰¾å¯»ç³»ç»Ÿ"/></a><div class="content"><a class="title" href="/2023/04/01/practice/%E4%BA%91%E5%A4%A7%E5%8D%83%E5%AF%BB/" title="äº‘å¤§åƒå¯» - åŸºäºæ‹ç…§è¯†åˆ«çš„å¤±ç‰©æ‰¾å¯»ç³»ç»Ÿ">äº‘å¤§åƒå¯» - åŸºäºæ‹ç…§è¯†åˆ«çš„å¤±ç‰©æ‰¾å¯»ç³»ç»Ÿ</a><time datetime="2023-04-01T12:00:00.000Z" title="å‘è¡¨äº 2023-04-01 20:00:00">2023-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/17/open-source-project/tutorial/" title="Java ä¼˜è´¨å¼€æºæŠ€æœ¯æ•™ç¨‹"><img src="https://s2.loli.net/2023/08/27/FvqDyxHKbiWo1d3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java ä¼˜è´¨å¼€æºæŠ€æœ¯æ•™ç¨‹"/></a><div class="content"><a class="title" href="/2023/03/17/open-source-project/tutorial/" title="Java ä¼˜è´¨å¼€æºæŠ€æœ¯æ•™ç¨‹">Java ä¼˜è´¨å¼€æºæŠ€æœ¯æ•™ç¨‹</a><time datetime="2023-03-17T09:00:13.505Z" title="å‘è¡¨äº 2023-03-17 17:00:13">2023-03-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023  <i id="heartbeat" class="fa fas fa-heartbeat"></i> é˜¿æ³½</div><div class="framework-info"><span>æ¡†æ¶ </span><a href="">Hexo</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>